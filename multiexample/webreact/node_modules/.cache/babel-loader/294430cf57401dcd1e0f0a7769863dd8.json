{"ast":null,"code":"var _jsxFileName = \"/Users/hal/java/git/it1901-example/multiexample/webreact/src/MultiExApp.js\";\nimport React from 'react';\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet';\nimport './MultiExApp.css';\n\nclass LocationMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      marker: props.marker != null ? [props.marker.latitude, props.marker.longitude] : null\n    };\n  }\n\n  setMarker(marker) {\n    this.setState({\n      marker: [marker.latitude, marker.longitude]\n    });\n  }\n\n  render() {\n    const markerDraggedCallback = event => {\n      var latLng = event.target._latlng;\n      this.props.mapMarkerChangedCallback({\n        latitude: latLng.lat,\n        longitude: latLng.lng\n      });\n    };\n\n    const center = this.state.marker != null ? this.state.marker : [0, 0];\n    const markerElement = this.state.marker != null ? React.createElement(Marker, {\n      position: this.state.marker,\n      draggable: true,\n      onDragend: markerDraggedCallback,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, \"@ \", this.state.marker[0], \", \", this.state.marker[1])) : null;\n    return React.createElement(Map, {\n      ref: this.mapRef,\n      center: center,\n      zoom: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }), markerElement);\n  }\n\n}\n\nclass ItemsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items,\n      selectedIndex: 0\n    };\n  }\n\n  setItems(items) {\n    this.setState({\n      items: items\n    });\n  }\n\n  render() {\n    var num = -1;\n    return React.createElement(\"table\", {\n      id: \"itemsList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.items.map(item => {\n      num = num + 1;\n      const index = num;\n\n      const handleClick = () => {\n        this.setState({\n          selectedIndex: index\n        });\n        this.props.selectedLocationChangedCallback(index);\n      };\n\n      var label = this.props.labelProvider(item);\n      return React.createElement(\"tr\", {\n        key: label,\n        className: num === this.state.selectedIndex ? \"selected-list-item\" : \"list-item-\" + num % 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        \"data-testid\": \"label\" + num,\n        onClick: handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, label));\n    })));\n  }\n\n}\n\nconst MultiExApp = ({\n  locations\n}) => {\n  // default marker is first marker in latLongs, or 0, 0 if latLongs is empty\n  const marker = locations.length > 0 ? [locations[0].latitude, locations[0].longitude] : [0, 0]; // allows access to actual LatLongMap\n\n  const mapRef = React.createRef();\n  const listRef = React.createRef();\n\n  const selectedLocationChangedCallback = num => {\n    mapRef.current.setMarker(locations[num]);\n  };\n\n  const mapMarkerChangedCallback = marker => {\n    var copy = this.state.latLongs.slice();\n    copy.splice(listRef.current.state.selectedIndex, 1, marker);\n    listRef.current.setItems(copy);\n    mapRef.current.setMarker(marker);\n  };\n\n  const location2Label = location => location.latitude + \", \" + location.longitude;\n\n  return React.createElement(\"div\", {\n    className: \"MultiExApp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(ItemsList, {\n    ref: listRef,\n    items: locations,\n    labelProvider: location2Label,\n    selectedLocationChangedCallback: selectedLocationChangedCallback,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(LocationMap, {\n    ref: mapRef,\n    marker: marker,\n    mapMarkerChangedCallback: mapMarkerChangedCallback,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }))))));\n};\n\nexport default MultiExApp;","map":{"version":3,"sources":["/Users/hal/java/git/it1901-example/multiexample/webreact/src/MultiExApp.js"],"names":["React","Map","Marker","Popup","TileLayer","LocationMap","Component","constructor","props","state","marker","latitude","longitude","setMarker","setState","render","markerDraggedCallback","event","latLng","target","_latlng","mapMarkerChangedCallback","lat","lng","center","markerElement","mapRef","ItemsList","items","selectedIndex","setItems","num","map","item","index","handleClick","selectedLocationChangedCallback","label","labelProvider","MultiExApp","locations","length","createRef","listRef","current","copy","latLongs","slice","splice","location2Label","location"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet'\n\nimport './MultiExApp.css';\n\nclass LocationMap extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t  \tthis.state = {\n\t    \tmarker: props.marker != null ? [props.marker.latitude, props.marker.longitude] : null\n\t    }\n\t}\n\n\tsetMarker(marker) {\n\t\tthis.setState({ marker: [marker.latitude, marker.longitude] })\n\t}\n\n\trender() {\n\t\tconst markerDraggedCallback = (event) => {\n\t\t\tvar latLng = event.target._latlng\n\t\t\tthis.props.mapMarkerChangedCallback({ latitude: latLng.lat, longitude: latLng.lng })\n\t\t}\n\t\tconst center = this.state.marker != null ? this.state.marker : [0, 0]\n    \tconst markerElement = this.state.marker != null ? (\n      \t\t<Marker\n\t\t\t\tposition={this.state.marker}\n\t\t\t\tdraggable={true}\n          \t\tonDragend={markerDraggedCallback}\n\t\t\t\t>\n        \t\t<Popup>@ {this.state.marker[0]}, {this.state.marker[1]}</Popup>\n      \t\t</Marker>\n    \t) : null\n\n    \treturn (\n      \t\t<Map ref={this.mapRef} center={center} zoom={8}>\n\t       \t\t<TileLayer\n\t          \t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t          \t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t        \t/>\n\t        \t{markerElement}\n      \t\t</Map>\n    \t)\n  \t}\n}\n\nclass ItemsList extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\titems: this.props.items,\n\t\t\tselectedIndex: 0\n\t\t}\n\t}\n\n\tsetItems(items) {\n\t\tthis.setState({ items: items})\n\t}\n\n\trender() {\n\t\tvar num = -1\n\t\treturn <table id=\"itemsList\">\n\t\t\t<tbody>\n\t\t\t\t{\n\t\t\t\t\tthis.state.items.map(item => {\n\t\t\t\t\t\tnum = num + 1\n\t\t\t\t\t\tconst index = num\n\t\t\t\t\t\tconst handleClick = () => {\n\t\t\t\t\t\t\tthis.setState({ selectedIndex : index})\n\t\t\t\t\t\t\tthis.props.selectedLocationChangedCallback(index)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar label = this.props.labelProvider(item)\n\t\t\t\t\t\treturn <tr key={label} className={num === this.state.selectedIndex ? \"selected-list-item\" : \"list-item-\" + (num % 2)}>\n\t\t\t\t\t\t\t<td data-testid={\"label\" + num} onClick={handleClick}>{label}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t</tbody>\n\t    </table>\n\t}\n}\n\nconst MultiExApp = ({locations}) => {\n\t// default marker is first marker in latLongs, or 0, 0 if latLongs is empty\n\tconst marker = locations.length > 0 ? [locations[0].latitude, locations[0].longitude] : [0, 0]\n\t// allows access to actual LatLongMap\n\tconst mapRef = React.createRef()\n\tconst listRef = React.createRef()\n\tconst selectedLocationChangedCallback = (num) => {\n\t\tmapRef.current.setMarker(locations[num])\n\t}\n\tconst mapMarkerChangedCallback = (marker) => {\n\t\tvar copy = this.state.latLongs.slice()\n\t\tcopy.splice(listRef.current.state.selectedIndex, 1, marker)\n\t\tlistRef.current.setItems(copy)\n\t\tmapRef.current.setMarker(marker)\n\t}\n\tconst location2Label = (location) => location.latitude + \", \" + location.longitude\n    return <div className=\"MultiExApp\">\n \t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><ItemsList ref={listRef} items={locations} labelProvider={location2Label} selectedLocationChangedCallback={selectedLocationChangedCallback}/></td>\n\t\t\t\t\t<td><LocationMap ref={mapRef} marker={marker} mapMarkerChangedCallback={mapMarkerChangedCallback}/></td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n    \t</table>\n    </div>\n}\n\nexport default MultiExApp;\n"]},"metadata":{},"sourceType":"module"}